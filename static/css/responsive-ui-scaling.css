/* Responsive UI scaling overrides (Windows/Linux/mobile/tablet)
   Goal: consistent sizing across OS font metrics + viewport sizes without rewriting existing dense UI CSS.
*/

:root {
  /* Fluid typography (keeps "dense" feel but avoids tiny UI on high-DPI Windows) */
  --ui-font-base: clamp(14px, 0.25vw + 13px, 16px);
  --ui-font-small: clamp(12px, 0.15vw + 11px, 14px);
  --ui-font-tiny: clamp(11px, 0.10vw + 10px, 13px);

  /* Fluid spacing */
  --ui-space-1: clamp(4px, 0.45vw, 8px);
  --ui-space-2: clamp(8px, 0.75vw, 14px);
  --ui-space-3: clamp(12px, 1.10vw, 18px);
  --ui-radius: clamp(6px, 0.6vw, 12px);
}

html {
  font-size: var(--ui-font-base);
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

body {
  font-size: 1rem !important;
  /* Force a consistent UI font across OSes even if a page-specific stylesheet sets Segoe UI */
  font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;
}

/* Better viewport height behavior on mobile browsers */
.dashboard-container,
.viewer-container {
  min-height: 100vh;
  min-height: 100dvh;
}

/* ===== Main app (templates/base.html) ===== */
.top-navbar {
  height: auto !important;
  min-height: 50px;
  padding: var(--ui-space-1) var(--ui-space-2) !important;
  gap: var(--ui-space-2);
}

.logo {
  font-size: clamp(14px, 0.3vw + 13px, 18px) !important;
}

.nav-right,
.nav-left {
  flex-wrap: wrap;
}

.nav-tabs {
  flex-wrap: wrap;
  row-gap: var(--ui-space-1);
}

.nav-tab {
  font-size: 0.85rem !important;
  padding: 0.45rem 0.75rem !important;
}

.controls-bar {
  height: auto !important;
  min-height: 42px;
  padding: var(--ui-space-1) var(--ui-space-2) !important;
  gap: var(--ui-space-1) !important;
}

.control-label {
  font-size: 0.85rem !important;
}

.control-input,
.control-select,
.btn-control,
.btn,
.btn-primary,
.btn-secondary,
.btn-outline-light {
  font-size: 0.85rem !important;
}

.admin-btn {
  font-size: 0.72rem !important;
}

.data-table {
  font-size: 0.85rem !important;
}

.data-table th {
  font-size: 0.75rem !important;
}

.data-table td {
  font-size: 0.85rem !important;
}

/* Make dense tables usable on small screens */
@media (max-width: 900px) {
  .data-table-container {
    overflow-x: auto;
  }
}

/* Phone layout: keep tabs accessible without breaking */
@media (max-width: 600px) {
  .nav-tabs {
    flex-wrap: nowrap;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    padding-bottom: 2px;
  }
  .nav-tab {
    flex: 0 0 auto;
    white-space: nowrap;
  }
}

/* ===== DICOM viewer (templates/dicom_viewer/base.html) ===== */
.viewer-container {
  height: 100vh !important;
  height: 100dvh !important;
}

/* Tablet: slightly narrower rails */
@media (max-width: 900px) {
  .viewer-container {
    grid-template-columns: 64px 1fr 54px !important;
    grid-template-rows: 56px 1fr 44px !important;
  }
}

/* Phone: stack layout, move left toolbar to bottom, hide right panel */
@media (max-width: 640px) {
  .viewer-container {
    grid-template-columns: 1fr !important;
    grid-template-rows: auto 1fr auto !important;
    width: 100vw !important;
  }

  .top-navbar {
    grid-column: 1 !important;
    grid-row: 1 !important;
    flex-wrap: wrap;
    gap: var(--ui-space-1);
    padding: var(--ui-space-1) var(--ui-space-2) !important;
  }

  .viewport {
    grid-column: 1 !important;
    grid-row: 2 !important;
    min-height: 0;
  }

  .right-panel {
    display: none !important;
  }

  .toolbar {
    grid-column: 1 !important;
    grid-row: 3 !important;
    flex-direction: row !important;
    min-width: 100% !important;
    max-width: none !important;
    width: 100% !important;
    border-right: none !important;
    border-top: 1px solid var(--border-color);
    overflow-x: auto !important;
    overflow-y: hidden !important;
    padding: var(--ui-space-1) !important;
    gap: var(--ui-space-1) !important;
  }

  .tool-group {
    flex-direction: row !important;
    gap: var(--ui-space-1) !important;
  }

  .tool-separator {
    width: 1px !important;
    height: 100% !important;
    margin: 0 var(--ui-space-1) !important;
  }

  .tool {
    width: 44px !important;
    height: 44px !important;
    font-size: 0 !important; /* icons only on phone; titles still provide tooltips */
  }

  .tool i {
    font-size: 18px !important;
  }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  * {
    transition: none !important;
    animation: none !important;
    scroll-behavior: auto !important;
  }
}

