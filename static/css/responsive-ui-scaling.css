/* Responsive layout helpers (Windows/Linux/mobile/tablet)
 *
 * IMPORTANT:
 * - Do NOT force global font scaling here.
 * - Let the browser/OS handle actual screen scaling (the user’s zoom/DPI).
 *
 * This file should only contain layout resilience fixes (vh/dvh, wrapping, small-screen layout),
 * not cross-OS font-size overrides that can make Linux appear “too big”.
 */

:root {
  /* Spacing tokens (fixed, so we don't "inflate" on large screens).
   * Using vw-based spacing makes Windows (often higher resolution) feel oversized.
   */
  --ui-space-1: 6px;
  --ui-space-2: 12px;
  --ui-space-3: 16px;
  --ui-radius: 10px;
}

/* Never force font-size here; only keep text-size-adjust safety */
html {
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* Better viewport height behavior on mobile browsers */
.dashboard-container,
.viewer-container {
  min-height: 100vh;
  min-height: 100dvh;
}

/* ===== Main app (templates/base.html) ===== */
.top-navbar {
  height: auto !important;
  min-height: 50px;
  padding: var(--ui-space-1) var(--ui-space-2) !important;
  gap: var(--ui-space-2);
}

.nav-right,
.nav-left {
  flex-wrap: wrap;
}

.nav-tabs {
  flex-wrap: wrap;
  row-gap: var(--ui-space-1);
}

.nav-tab {
  padding: 0.45rem 0.75rem !important;
}

.controls-bar {
  height: auto !important;
  min-height: 42px;
  padding: var(--ui-space-1) var(--ui-space-2) !important;
  gap: var(--ui-space-1) !important;
}

/* Make dense tables usable on small screens */
@media (max-width: 900px) {
  .data-table-container {
    overflow-x: auto;
  }
}

/* Phone layout: keep tabs accessible without breaking */
@media (max-width: 600px) {
  .nav-tabs {
    flex-wrap: nowrap;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    padding-bottom: 2px;
  }
  .nav-tab {
    flex: 0 0 auto;
    white-space: nowrap;
  }
}

/* ===== DICOM viewer (templates/dicom_viewer/base.html) ===== */
.viewer-container {
  height: 100vh !important;
  height: 100dvh !important;
}

/* Tablet: slightly narrower rails */
@media (max-width: 900px) {
  .viewer-container {
    grid-template-columns: 64px 1fr 54px !important;
    grid-template-rows: 56px 1fr 44px !important;
  }
}

/* Phone: stack layout, move left toolbar to bottom, hide right panel */
@media (max-width: 640px) {
  .viewer-container {
    grid-template-columns: 1fr !important;
    grid-template-rows: auto 1fr auto !important;
    width: 100vw !important;
  }

  .top-navbar {
    grid-column: 1 !important;
    grid-row: 1 !important;
    flex-wrap: wrap;
    gap: var(--ui-space-1);
    padding: var(--ui-space-1) var(--ui-space-2) !important;
  }

  .viewport {
    grid-column: 1 !important;
    grid-row: 2 !important;
    min-height: 0;
  }

  .right-panel {
    display: none !important;
  }

  .toolbar {
    grid-column: 1 !important;
    grid-row: 3 !important;
    flex-direction: row !important;
    min-width: 100% !important;
    max-width: none !important;
    width: 100% !important;
    border-right: none !important;
    border-top: 1px solid var(--border-color);
    overflow-x: auto !important;
    overflow-y: hidden !important;
    padding: var(--ui-space-1) !important;
    gap: var(--ui-space-1) !important;
  }

  .tool-group {
    flex-direction: row !important;
    gap: var(--ui-space-1) !important;
  }

  .tool-separator {
    width: 1px !important;
    height: 100% !important;
    margin: 0 var(--ui-space-1) !important;
  }

  .tool {
    width: 44px !important;
    height: 44px !important;
    font-size: 0 !important; /* icons only on phone; titles still provide tooltips */
  }

  .tool i {
    font-size: 18px !important;
  }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  * {
    transition: none !important;
    animation: none !important;
    scroll-behavior: auto !important;
  }
}

